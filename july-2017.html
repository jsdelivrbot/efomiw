<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>July 2017 - Everyday I Will For One Month</title>
	<link rel="stylesheet" href="">
</head>
<body>
	<h1>July</h1>
	<h2>I will fast everyday</h2>
	<h3>Rules:</h3>
	<p>Twice a week: eat breakfast only (up to 10 am).</p>
	<p>Remaining 5 days: eat within 8 hour period (e.g. First mouthfull at 9am last mouthfull at 5pm).</p>
	<p>Try avoid stuffing yourself during eating periods.</p>
	<p>If extremely hungry in fasting period, take creatine / BCAA supplement to avoid atrophy.</p>
	<p>Water, coffee and tea are allowed provided no sugar, milk or honey in the drink.</p>
	<div class="kpi">
		<div class="before">
			<h4>Before</h4>
			<div class="stat">74Kg</div>
		</div>
		<div class="before">
			<h4>After</h4>
			<div class="stat"></div>
		</div>
	</div>

	<div class="log">
		<div id="log/01-july-2017" data-key="log/01-july-2017">
			<label>01</label>
			<input class="done" type="checkbox" checked="checked">
			<input class="comment" type="text" value="">
		</div>
		<div id="log/02-july-2017" data-key="log/02-july-2017">
			<label>02</label>
			<input class="done" type="checkbox">
			<input class="comment" type="text" value="Breakfast only">
		</div>
		<div id="log/03-july-2017" data-key="log/03-july-2017">
			<label>03</label>
			<input class="done" type="checkbox">
			<input class="comment" type="text" value="">
		</div>
		<div id="log/04-july-2017" data-key="log/04-july-2017">
			<label>04</label>
			<input class="done" type="checkbox">
			<input class="comment" type="text" value="">
		</div>
		<div id="log/05-july-2017" data-key="log/05-july-2017">
			<label>05</label>
			<input class="done" type="checkbox">
			<input class="comment" type="text" value="">
		</div>
		<div id="log/06-july-2017" data-key="log/06-july-2017">
			<label>06</label>
			<input class="done" type="checkbox">
			<input class="comment" type="text" value="">
		</div>
		<div id="log/07-july-2017" data-key="log/07-july-2017">
			<label>07</label>
			<input class="done" type="checkbox">
			<input class="comment" type="text" value="">
		</div>
		<div id="log/08-july-2017" data-key="log/08-july-2017">
			<label>08</label>
			<input class="done" type="checkbox">
			<input class="comment" type="text" value="">
		</div>
		<div id="log/09-july-2017" data-key="log/09-july-2017">
			<label>09</label>
			<input class="done" type="checkbox">
			<input class="comment" type="text" value="">
		</div>
		<div id="log/10-july-2017" data-key="log/10-july-2017">
			<label>10</label>
			<input class="done" type="checkbox">
			<input class="comment" type="text" value="">
		</div>
		<div id="log/11-july-2017" data-key="log/11-july-2017">
			<label>11</label>
			<input class="done" type="checkbox">
			<input class="comment" type="text" value="">
		</div>
		<div id="log/12-july-2017" data-key="log/12-july-2017">
			<label>12</label>
			<input class="done" type="checkbox">
			<input class="comment" type="text" value="">
		</div>
		<div id="log/13-july-2017" data-key="log/13-july-2017">
			<label>13</label>
			<input class="done" type="checkbox">
			<input class="comment" type="text" value="">
		</div>
		<div id="log/14-july-2017" data-key="log/14-july-2017">
			<label>14</label>
			<input class="done" type="checkbox">
			<input class="comment" type="text" value="">
		</div>
		<div id="log/15-july-2017" data-key="log/15-july-2017">
			<label>15</label>
			<input class="done" type="checkbox">
			<input class="comment" type="text" value="">
		</div>
		<div id="log/16-july-2017" data-key="log/16-july-2017">
			<label>16</label>
			<input class="done" type="checkbox">
			<input class="comment" type="text" value="">
		</div>
		<div id="log/17-july-2017" data-key="log/17-july-2017">
			<label>17</label>
			<input class="done" type="checkbox">
			<input class="comment" type="text" value="">
		</div>
		<div id="log/18-july-2017" data-key="log/18-july-2017">
			<label>18</label>
			<input class="done" type="checkbox">
			<input class="comment" type="text" value="">
		</div>
		<div id="log/19-july-2017" data-key="log/19-july-2017">
			<label>19</label>
			<input class="done" type="checkbox">
			<input class="comment" type="text" value="">
		</div>
		<div id="log/20-july-2017" data-key="log/20-july-2017">
			<label>20</label>
			<input class="done" type="checkbox">
			<input class="comment" type="text" value="">
		</div>
		<div id="log/21-july-2017" data-key="log/21-july-2017">
			<label>21</label>
			<input class="done" type="checkbox">
			<input class="comment" type="text" value="">
		</div>
		<div id="log/22-july-2017" data-key="log/22-july-2017">
			<label>22</label>
			<input class="done" type="checkbox">
			<input class="comment" type="text" value="">
		</div>
		<div id="log/23-july-2017" data-key="log/23-july-2017">
			<label>23</label>
			<input class="done" type="checkbox">
			<input class="comment" type="text" value="">
		</div>
		<div id="log/24-july-2017" data-key="log/24-july-2017">
			<label>24</label>
			<input class="done" type="checkbox">
			<input class="comment" type="text" value="">
		</div>
		<div id="log/25-july-2017" data-key="log/25-july-2017">
			<label>25</label>
			<input class="done" type="checkbox">
			<input class="comment" type="text" value="">
		</div>
		<div id="log/26-july-2017" data-key="log/26-july-2017">
			<label>26</label>
			<input class="done" type="checkbox">
			<input class="comment" type="text" value="">
		</div>
		<div id="log/27-july-2017" data-key="log/27-july-2017">
			<label>27</label>
			<input class="done" type="checkbox">
			<input class="comment" type="text" value="">
		</div>
		<div id="log/28-july-2017" data-key="log/28-july-2017">
			<label>28</label>
			<input class="done" type="checkbox">
			<input class="comment" type="text" value="">
		</div>
		<div id="log/29-july-2017" data-key="log/29-july-2017">
			<label>29</label>
			<input class="done" type="checkbox">
			<input class="comment" type="text" value="">
		</div>
		<div id="log/30-july-2017" data-key="log/30-july-2017">
			<label>30</label>
			<input class="done" type="checkbox">
			<input class="comment" type="text" value="">
		</div>
		<div id="log/31-july-2017" data-key="log/31-july-2017">
			<label>31</label>
			<input class="done" type="checkbox">
			<input class="comment" type="text" value="">
		</div>
	</div>
</body>
<script
  src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
  integrity="sha256-k2WSCIexGzOj3Euiig+TlR8gA0EmPjuc79OEeY5L45g="
  crossorigin="anonymous"></script>
<script src="https://www.gstatic.com/firebasejs/4.1.3/firebase.js"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyDo-Wj5pqSFF5TJq2jf7h-4_ed1phQPBBc",
    authDomain: "efomiw.firebaseapp.com",
    databaseURL: "https://efomiw.firebaseio.com",
    projectId: "efomiw",
    storageBucket: "",
    messagingSenderId: "714233232984"
  };
  firebase.initializeApp(config);
</script>
<script>
	function daysInMonth(anyDateInMonth) {
	    return new Date(anyDateInMonth.getYear(),
	                    anyDateInMonth.getMonth()+1,
	                    0).getDate();}

	var database = firebase.database();
	var thisMonth = 07
	var thisYear = 2017
	var thisDate = new Date()
	thisDate.setMonth(thisMonth)
	thisDate.setYear(thisYear)

	var elements = [];
	for (var i = 0; i < daysInMonth(thisDate); i ++) {
		var day = i + 1;
		var dayString = day < 10 ? '0' + day : day.toString();
		var key = `log/${dayString}-july-2017`
		var ref = database.ref(key)
		var element = $('div[id="' + key + '"');
		ref.on('value', (function (element) {return function (snap) {
			var data = snap.val() || {};
			var comment = data.comment;
			var done = data.done;
			if (done) {
				element.find('.done').attr('checked', 'checked')
			}
			if (comment) {
				element.find('.comment').val(comment)
			}
		}})(element));
		element.find('.done').click(function (event) {
			var target = $(event.target);
			var key = target.parent().attr('data-key')
			database.ref(key).update({'done': target.is(':checked')})
		})
		element.find('.comment').on('change', function (event) {
			var target = $(event.target);
			var key = target.parent().attr('data-key')
			database.ref(key).update({'comment': target.val()})
		})
		elements.push(element)
	}
</script>
</html>
